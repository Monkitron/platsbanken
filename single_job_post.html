<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Platsbanken</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
   
    <header><h1 id="headline"></h1></header>
    
    <main>
        <div id="jobDetails"></div>
        
    </main>
    
    <footer></footer>
   
    
    <script>
        let url = new URL(window.location.href);
        let annonsId = url.searchParams.get("id");
        
        function fetchSingleJobPostById(jobId){
        
            const fetchSingleJobPost = fetch(`http://api.arbetsformedlingen.se/af/v0/platsannonser/${jobId}`);

            fetchSingleJobPost.then((response) => {
                return response.json();
            }).then((fetchSingleJobPost) => {
                displaySingleJobPost(fetchSingleJobPost)
            }).catch((error) =>{     
                console.log(error);
           })

        }
        
        fetchSingleJobPostById(annonsId);
        
        function displaySingleJobPost(jobDetails){
            console.log(jobDetails);
            
            const outputSingleJobPost = document.getElementById('jobDetails');
            const headline = document.getElementById('headline');
            
            const singleJobDetails = jobDetails.platsannons.annons;
            const workplaceDetails = jobDetails.platsannons.arbetsplats;
            const employmentConditions = jobDetails.platsannons.villkor;
            
            
            const singleJobPost = document.createElement('div');
            singleJobPost.classList.add('jobDetails');
            singleJobPost.innerHTML = `
                <p><strong>${singleJobDetails.yrkesbenamning}</strong> - ${singleJobDetails.kommunnamn}</p>
                <p>${singleJobDetails.annonstext}</p>
                <p>${workplaceDetails.arbetsplatsnamn}</p>
                <p>${singleJobDetails.anstallningstyp}</p>
            `;
            
            headline.innerHTML = `${singleJobDetails.annonsrubrik}`;
            outputSingleJobPost.appendChild(singleJobPost);
            
        }
    </script>
    
</body>
</html>